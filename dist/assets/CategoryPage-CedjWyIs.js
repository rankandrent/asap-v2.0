import{j as e,L as N,P as L,a as $,d as S,u as w,r as v}from"./index-BaYg4v0E.js";import{u as P}from"./useCategories-Fs3OXM6r.js";import{u as E,B as I}from"./Breadcrumb-74ORcTbN.js";import{C as A,a as k,b as B,c as F,d as M}from"./card-B7NPPkN6.js";import{u as T,a as R,S as D}from"./useInfiniteScroll-Dm4wPS89.js";import{S as y}from"./SEO-uX4JX8lL.js";import"./queries-CZBLKuiv.js";function H({subcategories:a,categorySlug:g,isLoading:o,error:c}){const{displayedItems:m,hasMore:s,isLoading:i,loadMore:l,displayedCount:u,totalItems:d}=T(a,9),{sentinelRef:t}=R({hasMore:s,isLoading:i,onLoadMore:l,threshold:200});return o?e.jsx("div",{className:"py-8",children:e.jsx(D,{count:9})}):c?e.jsxs("div",{className:"text-center py-12 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2 text-yellow-800",children:"Unable to Load Subcategories"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"There was an error loading subcategories. Please try refreshing the page."}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Page"})]}):!a||a.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"No subcategories found."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(n=>e.jsx(N,{to:`/categories/${g}/${n.slug}`,children:e.jsxs(A,{className:"hover:shadow-lg transition-shadow cursor-pointer h-full",children:[e.jsx(k,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(B,{className:"text-lg",children:n.name}),e.jsx(L,{className:"h-5 w-5 text-primary"})]})}),e.jsx(F,{children:e.jsxs(M,{children:[n.partCount.toLocaleString()," ",n.partCount===1?"part":"parts"]})})]})},n.slug))}),i&&e.jsxs("div",{className:"flex justify-center items-center py-8 mt-6",children:[e.jsx($,{className:"h-8 w-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading more subcategories..."})]}),s&&!i&&e.jsx("div",{ref:t,className:"h-20 flex items-center justify-center mt-6",children:e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",u," of ",d," subcategories"]})}),!s&&d>9&&e.jsx("div",{className:"text-center py-8 mt-6",children:e.jsxs("p",{className:"text-gray-500 font-medium",children:["âœ… All ",d," subcategories loaded"]})})]})}function V(){const{categorySlug:a}=S(),{selectedManufacturer:g}=w(),{data:o,isLoading:c,error:m}=P(),{data:s,isLoading:i,error:l}=E(a||""),u=c||i,d=m||l;v.useEffect(()=>{console.log("ðŸ“Š CategoryPage: State:",{categorySlug:a,selectedManufacturer:g,isLoadingCategories:c,isLoadingSubcategories:i,categoriesCount:o?.length||0,categories:o?.map(r=>`${r.name} (${r.subcategoryCount} subcats)`),subcategoriesCount:s?.length||0,subcategories:s?.map(r=>`${r.name} (${r.partCount} parts)`),categoriesError:m?.message,subcategoriesError:l?.message})},[a,g,c,i,o,s,m,l]);const t=o?.find(r=>r.slug===a);if(!t&&o)return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:"Category Not Found",description:"The category you're looking for doesn't exist.",canonical:`https://asap-amatom.com/categories/${a}`}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("p",{children:"Category not found."})})]});const n=`${t?.name||"Category"} - Amatom Parts | ASAP-Amatom.com`,h=`Browse all ${t?.name||"category"} parts from Amatom manufacturer. ${s?.length||0} subcategories available. Find specifications, pricing, and availability for aerospace and industrial ${t?.name} parts.`,f=`${t?.name}, Amatom ${t?.name}, ${t?.name} parts, aerospace ${t?.name}, industrial ${t?.name}, buy ${t?.name}`,p=`https://asap-amatom.com/categories/${a}`,b=`https://asap-amatom.com/images/categories/${a}.jpg`,x={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://asap-amatom.com"},{"@type":"ListItem",position:2,name:t?.name||"Category",item:p}]},j={"@context":"https://schema.org","@graph":[{"@context":"https://schema.org","@type":"CollectionPage",name:t?.name||"Category",description:h,url:p,breadcrumb:x,mainEntity:{"@type":"ItemList",numberOfItems:s?.length||0,itemListElement:s?.slice(0,10).map((r,C)=>({"@type":"ListItem",position:C+1,item:{"@type":"CollectionPage",name:r.name,url:`https://asap-amatom.com/categories/${a}/${r.slug}`}}))||[]}},x]};return e.jsxs(e.Fragment,{children:[e.jsx(y,{title:n,description:h,canonical:p,ogType:"website",ogImage:b,keywords:f,schema:j}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(I,{items:[{label:"Categories",href:"/"},{label:t?.name||"Category"}]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:t?.name}),e.jsxs("p",{className:"text-muted-foreground",children:["Browse ",s?.length||0," subcategories"]})]}),e.jsx(H,{subcategories:s||[],categorySlug:a||"",isLoading:u,error:d})]})]})}export{V as default};
